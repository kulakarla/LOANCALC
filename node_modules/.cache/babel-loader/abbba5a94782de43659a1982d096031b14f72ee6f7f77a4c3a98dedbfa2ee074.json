{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport useVuelidate from '@vuelidate/core';\nimport { required, helpers } from '@vuelidate/validators';\n//import {reactive} from 'vue'\n\nexport default {\n  name: 'MainView',\n  data() {\n    return {\n      v$: useVuelidate(),\n      personalCode: '',\n      loanAmount: '',\n      loanDuration: ''\n    };\n  },\n  validations() {\n    const validPersonalCode = value => /^[1-6][0-9]{8}(65|76|87|98)$/.test(value);\n    const validAmount = value => Number(value) >= 2000 && Number(value <= 10000);\n    const validDuration = value => /^[0-9]{2}$/.test(value) && Number(value) >= 12 && Number(value <= 60);\n    return {\n      personalCode: {\n        required,\n        validPersonalCode: helpers.withMessage(\"Invalid personal code\", validPersonalCode)\n      },\n      loanAmount: {\n        required,\n        validAmount: helpers.withMessage(\"Loan must be between 2000 and 10000\", validAmount)\n      },\n      loanDuration: {\n        required,\n        validDuration: helpers.withMessage(\"Loans are given for periods between 12 to 60 months\", validDuration)\n      }\n    };\n  },\n  methods: {\n    validLoan() {\n      this.v$.$touch();\n      if (!this.v$.$error) {\n        fetch(`http://localhost:3000/api/loans/${this.personalCode}/${this.loanAmount}/${this.loanDuration}`).then(response => response.json()).then(data => {\n          console.log(data);\n          if (data.getsLoan) {\n            if (data.loanInitialPeriod) {\n              console.log(\"Initial loan period success\");\n              this.$router.push('/success/' + data.loanAmount + '/' + data.initialPeriod);\n            } else {\n              console.log(\"Non initial period success\");\n              this.$router.push('/success/' + data.loanAmount + '/' + data.minimumLoanHypotheticalPeriod + '/' + data.possibleInitialLoanPeriod);\n            }\n          } else {\n            console.log(\"Loan rejected\");\n            this.$router.push('/failure');\n          }\n        }).catch(err => console.log(err.message));\n      }\n    }\n  }\n};","map":{"version":3,"names":["useVuelidate","required","helpers","name","data","v$","personalCode","loanAmount","loanDuration","validations","validPersonalCode","value","test","validAmount","Number","validDuration","withMessage","methods","validLoan","$touch","$error","fetch","then","response","json","console","log","getsLoan","loanInitialPeriod","$router","push","initialPeriod","minimumLoanHypotheticalPeriod","possibleInitialLoanPeriod","catch","err","message"],"sources":["C:\\Users\\Karl Kristjan Tamm\\Documents\\praktikad\\inbank\\inbankVNOUFIX\\inbank\\src\\views\\MainView.vue"],"sourcesContent":["<template>\r\n  <div class=\"root\">\r\n    <div class=\"databox\">\r\n      <img src=\"../assets/loancalc_logo.png\">\r\n      <div class=\"inputDiv\">\r\n        <input type=\"text\" name=\"personalCode\" v-model=\"personalCode\" placeholder=\"Personal code\"/>\r\n        <p v-if=\"v$.personalCode.$error\">{{ v$.personalCode.$errors[0].$message }}</p>\r\n      </div>\r\n      <div class=\"inputDiv\">\r\n        <input type=\"text\" name=\"loanAmount\" v-model=\"loanAmount\" placeholder=\"Loan amount\"/>\r\n        <p v-if=\"v$.loanAmount.$error\">{{ v$.loanAmount.$errors[0].$message }}</p>\r\n      </div>\r\n      <div class=\"inputDiv\">\r\n        <input type=\"text\" name=\"loanDuration\" v-model=\"loanDuration\" placeholder=\"Loan duration\"/>\r\n        <p v-if=\"v$.loanDuration.$error\"> {{ v$.loanDuration.$errors[0].$message }}</p>\r\n      </div>\r\n      <button @click=\"validLoan\" :disabled=\"v$.$error ? true : false\">SUBMIT</button>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport useVuelidate from '@vuelidate/core'\r\nimport {required, helpers} from '@vuelidate/validators'\r\n//import {reactive} from 'vue'\r\n\r\nexport default {\r\n  name: 'MainView',\r\n\r\n  data(){\r\n    return{\r\n      v$: useVuelidate(),\r\n      personalCode: '',\r\n      loanAmount: '',\r\n      loanDuration: '',\r\n    }\r\n  },\r\n\r\n  validations(){\r\n\r\n    const validPersonalCode = (value) => /^[1-6][0-9]{8}(65|76|87|98)$/.test(value)\r\n\r\n    const validAmount = (value) => Number(value) >= 2000 && Number(value <= 10000)\r\n\r\n    const validDuration = (value) => /^[0-9]{2}$/.test(value) && Number(value) >= 12 && Number(value <= 60)\r\n\r\n    return{\r\n      personalCode: {\r\n        required,\r\n        validPersonalCode: helpers.withMessage(\"Invalid personal code\", validPersonalCode),\r\n      },\r\n      loanAmount: {\r\n        required,\r\n        validAmount: helpers.withMessage(\"Loan must be between 2000 and 10000\", validAmount),\r\n      },\r\n      loanDuration: {\r\n        required,\r\n        validDuration: helpers.withMessage(\"Loans are given for periods between 12 to 60 months\", validDuration)\r\n      }\r\n    };\r\n  },\r\n  methods:{\r\n    validLoan(){\r\n      this.v$.$touch()\r\n\r\n      if(!this.v$.$error){\r\n      fetch(`http://localhost:3000/api/loans/${this.personalCode}/${this.loanAmount}/${this.loanDuration}`)\r\n          .then( response => response.json())\r\n          .then( data => {\r\n\r\n            console.log(data);\r\n\r\n            if(data.getsLoan){\r\n              if(data.loanInitialPeriod){\r\n                console.log(\"Initial loan period success\")\r\n                this.$router.push('/success/' + data.loanAmount + '/' + data.initialPeriod)\r\n              }else{\r\n                console.log(\"Non initial period success\")\r\n                this.$router.push('/success/' + data.loanAmount + '/' + data.minimumLoanHypotheticalPeriod + '/' + data.possibleInitialLoanPeriod)\r\n              }\r\n            }else{\r\n              console.log(\"Loan rejected\")\r\n              this.$router.push('/failure')\r\n            }\r\n\r\n          })\r\n          .catch( err => console.log(err.message))\r\n      }\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n\r\n.root{\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.databox{\r\n  border-radius:10px;\r\n  border: 3px solid #2A0A55;\r\n  width: 400px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 0.5%;\r\n  margin: 0.5%;\r\n\r\n}\r\n\r\n\r\n.inputDiv{\r\n  width: 300px;\r\n  margin-bottom: 10px;\r\n  margin-top: 10px;\r\n\r\n}\r\n\r\n.copyright{\r\n  width: 400px;\r\n}\r\n\r\np{\r\n  word-wrap: break-word;\r\n  margin-top: 3px;\r\n  margin-bottom: 0;\r\n  color: #C16E70;\r\n  font-size: 10px;\r\n}\r\n\r\n\r\ninput{\r\n  border: none;\r\n  outline: 0;\r\n  border-bottom: 1px solid purple;\r\n  width: 100%;\r\n  font-size: 20px;\r\n  color: #5B5B5D;\r\n  font-family: Helvetica, serif;\r\n  letter-spacing: -0.75px;\r\n}\r\n\r\n\r\nimg{\r\n  margin-top: 30px;\r\n  margin-bottom: 30px;\r\n}\r\n\r\nbutton{\r\n  width: 200px;\r\n  height: 50px;\r\n  border: 2px solid #2A0A55;\r\n  background-color: #2A0A55;\r\n  color: white;\r\n  font-size: 25px;\r\n  font-family: \"Raleway\";\r\n  transition-duration: 0.4s;\r\n  margin-top: 10px;\r\n  border-radius: 2px;\r\n  margin-bottom: 10px;\r\n}\r\nbutton:enabled:hover{\r\n  background-color: white;\r\n  color: #2A0A55;\r\n  cursor: pointer;\r\n\r\n\r\n}\r\n\r\nbutton:disabled{\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n\r\n}\r\n\r\n::placeholder{\r\n  opacity: 0.3;\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n</style>"],"mappings":";AAwBA,OAAOA,YAAW,MAAO,iBAAgB;AACzC,SAAQC,QAAQ,EAAEC,OAAO,QAAO,uBAAsB;AACtD;;AAEA,eAAe;EACbC,IAAI,EAAE,UAAU;EAEhBC,IAAIA,CAAA,EAAE;IACJ,OAAM;MACJC,EAAE,EAAEL,YAAY,EAAE;MAClBM,YAAY,EAAE,EAAE;MAChBC,UAAU,EAAE,EAAE;MACdC,YAAY,EAAE;IAChB;EACF,CAAC;EAEDC,WAAWA,CAAA,EAAE;IAEX,MAAMC,iBAAgB,GAAKC,KAAK,IAAK,8BAA8B,CAACC,IAAI,CAACD,KAAK;IAE9E,MAAME,WAAU,GAAKF,KAAK,IAAKG,MAAM,CAACH,KAAK,KAAK,IAAG,IAAKG,MAAM,CAACH,KAAI,IAAK,KAAK;IAE7E,MAAMI,aAAY,GAAKJ,KAAK,IAAK,YAAY,CAACC,IAAI,CAACD,KAAK,KAAKG,MAAM,CAACH,KAAK,KAAK,EAAC,IAAKG,MAAM,CAACH,KAAI,IAAK,EAAE;IAEtG,OAAM;MACJL,YAAY,EAAE;QACZL,QAAQ;QACRS,iBAAiB,EAAER,OAAO,CAACc,WAAW,CAAC,uBAAuB,EAAEN,iBAAiB;MACnF,CAAC;MACDH,UAAU,EAAE;QACVN,QAAQ;QACRY,WAAW,EAAEX,OAAO,CAACc,WAAW,CAAC,qCAAqC,EAAEH,WAAW;MACrF,CAAC;MACDL,YAAY,EAAE;QACZP,QAAQ;QACRc,aAAa,EAAEb,OAAO,CAACc,WAAW,CAAC,qDAAqD,EAAED,aAAa;MACzG;IACF,CAAC;EACH,CAAC;EACDE,OAAO,EAAC;IACNC,SAASA,CAAA,EAAE;MACT,IAAI,CAACb,EAAE,CAACc,MAAM,EAAC;MAEf,IAAG,CAAC,IAAI,CAACd,EAAE,CAACe,MAAM,EAAC;QACnBC,KAAK,CAAE,mCAAkC,IAAI,CAACf,YAAa,IAAG,IAAI,CAACC,UAAW,IAAG,IAAI,CAACC,YAAa,EAAC,EAC/Fc,IAAI,CAAEC,QAAO,IAAKA,QAAQ,CAACC,IAAI,EAAE,EACjCF,IAAI,CAAElB,IAAG,IAAK;UAEbqB,OAAO,CAACC,GAAG,CAACtB,IAAI,CAAC;UAEjB,IAAGA,IAAI,CAACuB,QAAQ,EAAC;YACf,IAAGvB,IAAI,CAACwB,iBAAiB,EAAC;cACxBH,OAAO,CAACC,GAAG,CAAC,6BAA6B;cACzC,IAAI,CAACG,OAAO,CAACC,IAAI,CAAC,WAAU,GAAI1B,IAAI,CAACG,UAAS,GAAI,GAAE,GAAIH,IAAI,CAAC2B,aAAa;YAC5E,CAAC,MAAI;cACHN,OAAO,CAACC,GAAG,CAAC,4BAA4B;cACxC,IAAI,CAACG,OAAO,CAACC,IAAI,CAAC,WAAU,GAAI1B,IAAI,CAACG,UAAS,GAAI,GAAE,GAAIH,IAAI,CAAC4B,6BAA4B,GAAI,GAAE,GAAI5B,IAAI,CAAC6B,yBAAyB;YACnI;UACF,CAAC,MAAI;YACHR,OAAO,CAACC,GAAG,CAAC,eAAe;YAC3B,IAAI,CAACG,OAAO,CAACC,IAAI,CAAC,UAAU;UAC9B;QAEF,CAAC,EACAI,KAAK,CAAEC,GAAE,IAAKV,OAAO,CAACC,GAAG,CAACS,GAAG,CAACC,OAAO,CAAC;MAC3C;IACF;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}